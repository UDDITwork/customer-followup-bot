# Test Email Examples

Use these example emails to test the system via the `/dev/receive-email` endpoint in development mode.

## Example 1: Complete Information

**Expected Result:** Ticket created with status READY (all fields present)

```json
{
  "from_email": "john.smith@example.com",
  "subject": "Quote Request for Dell Laptops",
  "body": "Hi,\n\nI'm interested in getting a quote for Dell Latitude 5430 laptops for our office.\n\nDetails:\n- Model: Dell Latitude 5430\n- RAM: 16GB\n- Storage: 512GB SSD\n- Screen: 14-inch FHD\n- Warranty: 3-year ProSupport\n- Quantity: 25 units\n- Delivery: 123 Main St, New York, NY 10001\n- Timeline: Need by March 15, 2026\n- Budget: Around $30,000\n\nPlease send me a quote at your earliest convenience.\n\nBest regards,\nJohn Smith"
}
```

---

## Example 2: Missing Information

**Expected Result:** Ticket created with status WAITING_ON_CUSTOMER, follow-up email sent

**Missing fields:** Storage, Screen size, Warranty, Quantity, Delivery location, Timeline

```json
{
  "from_email": "sarah.j@company.com",
  "subject": "Laptop quote needed",
  "body": "Hello,\n\nI need a quote for some laptops. We're looking at HP EliteBook models with 16GB RAM.\n\nCan you send me pricing?\n\nThanks,\nSarah Johnson"
}
```

---

## Example 3: Minimal Information

**Expected Result:** Ticket created with status WAITING_ON_CUSTOMER, follow-up email sent

**Missing fields:** Laptop model, RAM, Storage, Screen size, Warranty, Quantity, Delivery location, Timeline

```json
{
  "from_email": "mike@email.com",
  "subject": "Price for laptops?",
  "body": "Hi, need laptops for office. Please quote.\n\nMike"
}
```

---

## Example 4: Reply with Missing Information

**Expected Result:** Ticket updated, status remains WAITING_ON_CUSTOMER, another follow-up sent

First, send Example 2 above to create a ticket. Note the `ticket_id` in the response.

Then send this reply (replace `TICKET_ID` with the actual ticket ID):

```json
{
  "from_email": "sarah.j@company.com",
  "subject": "Re: Laptop quote needed",
  "body": "Here's more info:\n\n- Storage: 512GB SSD\n- Screen: 15.6-inch\n- Quantity: 10 units\n\nLet me know if you need anything else!",
  "in_reply_to": TICKET_ID
}
```

---

## Example 5: Reply with All Missing Information

**Expected Result:** Ticket updated to READY status, no follow-up sent

First, send Example 2 to create a ticket, then send this reply:

```json
{
  "from_email": "sarah.j@company.com",
  "subject": "Re: Laptop quote needed",
  "body": "Here are the complete details:\n\n- Storage: 512GB SSD\n- Screen: 15.6-inch  \n- Warranty: 2-year on-site\n- Quantity: 10 units\n- Delivery: 456 Business Ave, Chicago, IL 60601\n- Timeline: Need by February 28, 2026\n\nThanks!",
  "in_reply_to": TICKET_ID
}
```

---

## How to Test

### Using curl:

```bash
# Send a new email
curl -X POST http://localhost:8000/dev/receive-email \
  -H "Content-Type: application/json" \
  -d '{
    "from_email": "john.smith@example.com",
    "subject": "Quote Request",
    "body": "I need 25 Dell Latitude laptops with 16GB RAM..."
  }'

# Send a reply (use actual ticket_id from previous response)
curl -X POST http://localhost:8000/dev/receive-email \
  -H "Content-Type: application/json" \
  -d '{
    "from_email": "john.smith@example.com",
    "subject": "Re: Quote Request",
    "body": "Here are the missing details...",
    "in_reply_to": 1
  }'

# View sent emails (follow-ups generated by system)
curl http://localhost:8000/dev/sent-emails
```

### Using Python:

```python
import requests

# Send a new email
response = requests.post('http://localhost:8000/dev/receive-email', json={
    "from_email": "john.smith@example.com",
    "subject": "Quote Request",
    "body": "I need laptops..."
})
print(response.json())

# View sent emails
response = requests.get('http://localhost:8000/dev/sent-emails')
print(response.json())
```

### Using FastAPI Docs:

1. Start the backend: `uvicorn app.main:app --reload`
2. Open http://localhost:8000/docs
3. Find the `/dev/receive-email` endpoint
4. Click "Try it out"
5. Paste one of the JSON examples above
6. Click "Execute"
7. Check the response
8. View sent emails at `/dev/sent-emails`
